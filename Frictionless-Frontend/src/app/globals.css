@tailwind base;
@tailwind components;
@tailwind utilities;

/* Fonts loaded via next/font/google in layout.tsx — no @import needed */

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

@layer base {
  :root {
    /* Font variables set by next/font classes on <body> — these are fallbacks only */
    --font-display: var(--font-display, 'Plus Jakarta Sans', sans-serif);
    --font-body: var(--font-body, 'Inter', sans-serif);
    --font-mono: var(--font-mono, 'JetBrains Mono', monospace);

    /* Semantic tokens — dark (default) */
    --bg-app: 222 47% 6%;
    --bg-surface: 220 30% 8%;
    --bg-elevated: 220 25% 11%;
    --text-primary: 210 20% 95%;
    --text-secondary: 215 16% 75%;
    --text-muted: 215 14% 65%;
    --text-inverse: 222 47% 6%;
    --border-default: 220 13% 26%;
    --border-strong: 220 13% 36%;
    --focus-ring: 217 91% 60%;
    --hover-overlay: 0 0% 100% / 0.05;
    --active-overlay: 0 0% 100% / 0.08;
    --disabled-opacity: 0.5;

    --background: var(--bg-app);
    --foreground: var(--text-primary);
    --card: var(--bg-surface);
    --card-foreground: var(--text-primary);
    --popover: var(--bg-elevated);
    --popover-foreground: var(--text-primary);
    --primary: 217 91% 60%;
    --primary-foreground: 0 0% 100%;
    --secondary: 220 15% 16%;
    --secondary-foreground: var(--text-primary);
    --muted: 220 15% 16%;
    --muted-foreground: var(--text-muted);
    --accent: 263 70% 58%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: var(--border-default);
    --input: var(--border-default);
    --ring: var(--focus-ring);
    --radius: 0.75rem;
    --chart-1: 217 91% 60%;
    --chart-2: 160 84% 39%;
    --chart-3: 263 70% 58%;
    --chart-4: 38 92% 50%;
    --chart-5: 187 85% 43%;
    --chart-axis: 215 14% 65%;
    --chart-grid: 220 13% 20%;
    --chart-tooltip-bg: 220 30% 12%;
    --chart-tooltip-fg: 210 20% 95%;

    /* Additional semantic tokens — dark */
    --bg-sunken: 222 47% 4%;
    --border-subtle: 220 13% 18%;
    --status-success: 160 84% 39%;
    --status-warning: 38 92% 50%;
    --status-error: 0 84% 60%;
    --status-info: 217 91% 60%;
  }

  .light {
    /* Semantic tokens — light mode (complete, no dark leakage) */
    --bg-app: 210 20% 98%;
    --bg-surface: 0 0% 100%;
    --bg-elevated: 0 0% 100%;
    --bg-sunken: 220 14% 96%;
    --text-primary: 222 47% 11%;
    --text-secondary: 220 13% 32%;
    --text-muted: 220 9% 46%;
    --text-inverse: 0 0% 100%;
    --border-default: 220 13% 88%;
    --border-strong: 220 13% 72%;
    --border-subtle: 220 13% 93%;
    --focus-ring: 217 91% 50%;
    --hover-overlay: 0 0% 0% / 0.04;
    --active-overlay: 0 0% 0% / 0.08;
    --disabled-opacity: 0.4;

    --background: var(--bg-app);
    --foreground: var(--text-primary);
    --card: var(--bg-surface);
    --card-foreground: var(--text-primary);
    --popover: var(--bg-elevated);
    --popover-foreground: var(--text-primary);
    --primary: 217 91% 45%;
    --primary-foreground: 0 0% 100%;
    --secondary: 220 14% 94%;
    --secondary-foreground: 222 47% 11%;
    --muted: 220 14% 96%;
    --muted-foreground: 220 9% 46%;
    --accent: 263 70% 50%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 84% 55%;
    --destructive-foreground: 0 0% 100%;
    --border: var(--border-default);
    --input: 220 13% 88%;
    --ring: var(--focus-ring);
    --chart-1: 217 91% 50%;
    --chart-2: 160 84% 35%;
    --chart-3: 263 70% 50%;
    --chart-4: 38 92% 45%;
    --chart-5: 187 85% 38%;
    --chart-axis: 220 9% 40%;
    --chart-grid: 220 13% 92%;
    --chart-tooltip-bg: 222 47% 11%;
    --chart-tooltip-fg: 210 20% 98%;

    /* Status colors — WCAG AA on white */
    --status-success: 160 84% 30%;
    --status-warning: 38 92% 40%;
    --status-error: 0 84% 50%;
    --status-info: 217 91% 45%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    @apply bg-background text-foreground font-body antialiased;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
  }

  code, pre, .font-mono {
    font-family: var(--font-mono);
  }
}

@layer components {
  .glass {
    @apply backdrop-blur-xl border;
  }
  :root:not(.light) .glass {
    @apply bg-white/5 border-white/10;
  }
  .light .glass {
    @apply bg-black/5 border-black/10;
  }

  .glass-card {
    @apply backdrop-blur-xl rounded-xl;
    background-color: hsl(var(--bg-surface));
    border: 1px solid hsl(var(--border-default));
  }
  :root:not(.light) .glass-card {
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(255, 255, 255, 0.03);
  }
  .light .glass-card {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(0, 0, 0, 0.04);
  }

  .gradient-text {
    @apply bg-clip-text text-transparent bg-neon-gradient;
  }

  .glow-border {
    @apply border border-electric-blue/20 shadow-glow;
  }

  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .touch-target {
    min-width: 44px;
    min-height: 44px;
  }
}

/* Custom scrollbar for desktop */
@media (hover: hover) {
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  :root:not(.light) ::-webkit-scrollbar-thumb {
    background: hsl(220 13% 26%);
    border-radius: 3px;
  }
  :root:not(.light) ::-webkit-scrollbar-thumb:hover {
    background: hsl(220 13% 36%);
  }
  .light ::-webkit-scrollbar-thumb {
    background: hsl(220 13% 85%);
    border-radius: 3px;
  }
  .light ::-webkit-scrollbar-thumb:hover {
    background: hsl(220 13% 75%);
  }
}

/* Mobile viewport height fix */
@supports (height: 100dvh) {
  .h-screen-safe {
    height: 100dvh;
  }
}
@supports not (height: 100dvh) {
  .h-screen-safe {
    height: 100vh;
  }
}

/* Animated gradient background */
.animated-gradient {
  background-size: 300% 300%;
  animation: gradient-shift 8s ease infinite;
}

/* Dashboard hero gradient */
.dashboard-hero-gradient {
  background:
    radial-gradient(ellipse 80% 60% at 20% 40%, hsl(217 91% 60% / 0.08) 0%, transparent 70%),
    radial-gradient(ellipse 60% 50% at 80% 30%, hsl(263 70% 58% / 0.06) 0%, transparent 70%),
    hsl(var(--bg-surface));
}
.light .dashboard-hero-gradient {
  background:
    radial-gradient(ellipse 80% 60% at 20% 40%, hsl(217 91% 50% / 0.06) 0%, transparent 70%),
    radial-gradient(ellipse 60% 50% at 80% 30%, hsl(263 70% 50% / 0.04) 0%, transparent 70%),
    hsl(var(--bg-surface));
}

/* AI insight card glow */
.ai-insight-glow {
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.2),
    0 0 20px hsl(263 70% 58% / 0.08),
    0 0 40px hsl(217 91% 60% / 0.05),
    inset 0 0 0 1px rgba(255, 255, 255, 0.03);
}
.light .ai-insight-glow {
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.08),
    0 0 20px hsl(263 70% 50% / 0.06),
    0 0 40px hsl(217 91% 50% / 0.03),
    0 0 0 1px rgba(0, 0, 0, 0.04);
}

/* Skeleton shimmer */
.skeleton-shimmer {
  position: relative;
  overflow: hidden;
}
.skeleton-shimmer::after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  transform: translateX(-100%);
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.04),
    transparent
  );
  animation: shimmer 2s infinite;
}
.light .skeleton-shimmer::after {
  background: linear-gradient(
    90deg,
    transparent,
    rgba(0, 0, 0, 0.04),
    transparent
  );
}

/* Readiness rubric card evidence styling */
.readiness-rubric-card {
  transition: box-shadow 0.2s ease, border-color 0.2s ease;
}
.readiness-rubric-card:hover {
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
}
.light .readiness-rubric-card:hover {
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
}

/* Readiness score gauge glow */
.score-gauge-glow {
  filter: drop-shadow(0 0 8px var(--score-color, rgba(59, 130, 246, 0.3)));
}

/* Readiness category panel - equal height layout */
.readiness-category-panel {
  display: flex;
  flex-direction: column;
}

/* Recharts tooltip override for glass effect */
.recharts-tooltip-wrapper {
  z-index: 100 !important;
}

/* Ask Frictionless side panel */
.ask-panel-shadow {
  box-shadow: -8px 0 32px rgba(0, 0, 0, 0.15);
}
.light .ask-panel-shadow {
  box-shadow: -4px 0 24px rgba(0, 0, 0, 0.08);
}
