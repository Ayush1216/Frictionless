@tailwind base;
@tailwind components;
@tailwind utilities;

/* Fonts loaded via next/font/google in layout.tsx — no @import needed */

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

@layer base {
  :root {
    /* Font variables set by next/font classes on <body> — these are fallbacks only */
    --font-display: var(--font-display, 'Plus Jakarta Sans', sans-serif);
    --font-body: var(--font-body, 'Inter', sans-serif);
    --font-mono: var(--font-mono, 'JetBrains Mono', monospace);

    /* Semantic tokens — dark (default) */
    --bg-app: 222 47% 6%;
    --bg-surface: 220 30% 8%;
    --bg-elevated: 220 25% 11%;
    --text-primary: 210 20% 95%;
    --text-secondary: 215 16% 75%;
    --text-muted: 215 14% 65%;
    --text-inverse: 222 47% 6%;
    --border-default: 220 13% 26%;
    --border-strong: 220 13% 36%;
    --focus-ring: 217 91% 60%;
    --hover-overlay: 0 0% 100% / 0.05;
    --active-overlay: 0 0% 100% / 0.08;
    --disabled-opacity: 0.5;

    --background: var(--bg-app);
    --foreground: var(--text-primary);
    --card: var(--bg-surface);
    --card-foreground: var(--text-primary);
    --popover: var(--bg-elevated);
    --popover-foreground: var(--text-primary);
    --primary: 217 91% 60%;
    --primary-foreground: 0 0% 100%;
    --secondary: 220 15% 16%;
    --secondary-foreground: var(--text-primary);
    --muted: 220 15% 16%;
    --muted-foreground: var(--text-muted);
    --accent: 263 70% 58%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    --border: var(--border-default);
    --input: var(--border-default);
    --ring: var(--focus-ring);
    --radius: 0.75rem;
    --chart-1: 217 91% 60%;
    --chart-2: 160 84% 39%;
    --chart-3: 263 70% 58%;
    --chart-4: 38 92% 50%;
    --chart-5: 187 85% 43%;
    --chart-axis: 215 14% 65%;
    --chart-grid: 220 13% 20%;
    --chart-tooltip-bg: 220 30% 12%;
    --chart-tooltip-fg: 210 20% 95%;

    /* Additional semantic tokens — dark */
    --bg-sunken: 222 47% 4%;
    --border-subtle: 220 13% 18%;
    --status-success: 160 84% 39%;
    --status-warning: 38 92% 50%;
    --status-error: 0 84% 60%;
    --status-info: 217 91% 60%;

    /* ═══════════════════════════════════════════ */
    /* FRICTIONLESS DESIGN TOKENS (Dark default)  */
    /* ═══════════════════════════════════════════ */

    /* ── Brand Colors ── */
    --fi-primary: #10B981;
    --fi-primary-hover: #059669;
    --fi-primary-light: #D1FAE5;
    --fi-primary-dark: #065F46;
    --fi-primary-50: #ECFDF5;
    --fi-primary-100: #D1FAE5;
    --fi-primary-500: #10B981;
    --fi-primary-600: #059669;
    --fi-primary-700: #047857;

    /* ── Score Status Colors ── */
    --fi-score-excellent: #22C55E;
    --fi-score-impressive: #22C55E;
    --fi-score-good: #FACC15;
    --fi-score-moderate: #FACC15;
    --fi-score-need-improvement: #EF4444;

    --fi-score-excellent-bg: rgba(34, 197, 94, 0.1);
    --fi-score-good-bg: rgba(250, 204, 21, 0.1);
    --fi-score-moderate-bg: rgba(250, 204, 21, 0.1);
    --fi-score-need-improvement-bg: rgba(239, 68, 68, 0.1);

    /* ── Surface Colors (Dark) ── */
    --fi-bg-primary: #0B1120;
    --fi-bg-secondary: #131C2E;
    --fi-bg-tertiary: #1A2540;
    --fi-bg-card: #151F32;
    --fi-bg-card-hover: #1A2540;
    --fi-bg-overlay: rgba(0, 0, 0, 0.7);

    /* ── Border Colors ── */
    --fi-border: #1E3048;
    --fi-border-strong: #2A4060;
    --fi-border-focus: #10B981;

    /* ── Text Colors ── */
    --fi-text-primary: #F1F5F9;
    --fi-text-secondary: #94A3B8;
    --fi-text-tertiary: #64748B;
    --fi-text-muted: #475569;
    --fi-text-inverse: #0F172A;
    --fi-text-link: #34D399;

    /* ── Shadows ── */
    --fi-shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.2);
    --fi-shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.3);
    --fi-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    --fi-shadow-md: 0 4px 12px rgba(0, 0, 0, 0.4);
    --fi-shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.4);
    --fi-shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.5);

    /* ── Border Radius ── */
    --fi-radius-sm: 6px;
    --fi-radius: 8px;
    --fi-radius-md: 10px;
    --fi-radius-lg: 14px;
    --fi-radius-xl: 18px;
    --fi-radius-2xl: 24px;
    --fi-radius-full: 9999px;

    /* ── Spacing Scale ── */
    --fi-space-1: 4px;
    --fi-space-2: 8px;
    --fi-space-3: 12px;
    --fi-space-4: 16px;
    --fi-space-5: 20px;
    --fi-space-6: 24px;
    --fi-space-8: 32px;
    --fi-space-10: 40px;
    --fi-space-12: 48px;

    /* ── Typography ── */
    --fi-font-sans: var(--font-body, 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif);
    --fi-font-mono: var(--font-mono, 'JetBrains Mono', 'Fira Code', monospace);
    --fi-text-xs: 12px;
    --fi-text-sm: 14px;
    --fi-text-base: 15px;
    --fi-text-lg: 18px;
    --fi-text-xl: 20px;
    --fi-text-2xl: 24px;
    --fi-text-3xl: 30px;
    --fi-text-4xl: 36px;
    --fi-text-score: 42px;

    /* ── Transitions ── */
    --fi-transition-fast: 150ms ease;
    --fi-transition: 200ms ease;
    --fi-transition-slow: 300ms ease;
    --fi-transition-spring: 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  .light {
    /* Semantic tokens — light mode (complete, no dark leakage) */
    --bg-app: 210 20% 98%;
    --bg-surface: 0 0% 100%;
    --bg-elevated: 0 0% 100%;
    --bg-sunken: 220 14% 96%;
    --text-primary: 222 47% 11%;
    --text-secondary: 220 13% 32%;
    --text-muted: 220 9% 46%;
    --text-inverse: 0 0% 100%;
    --border-default: 220 13% 88%;
    --border-strong: 220 13% 72%;
    --border-subtle: 220 13% 93%;
    --focus-ring: 217 91% 50%;
    --hover-overlay: 0 0% 0% / 0.04;
    --active-overlay: 0 0% 0% / 0.08;
    --disabled-opacity: 0.4;

    --background: var(--bg-app);
    --foreground: var(--text-primary);
    --card: var(--bg-surface);
    --card-foreground: var(--text-primary);
    --popover: var(--bg-elevated);
    --popover-foreground: var(--text-primary);
    --primary: 217 91% 45%;
    --primary-foreground: 0 0% 100%;
    --secondary: 220 14% 94%;
    --secondary-foreground: 222 47% 11%;
    --muted: 220 14% 96%;
    --muted-foreground: 220 9% 46%;
    --accent: 263 70% 50%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 84% 55%;
    --destructive-foreground: 0 0% 100%;
    --border: var(--border-default);
    --input: 220 13% 88%;
    --ring: var(--focus-ring);
    --chart-1: 217 91% 50%;
    --chart-2: 160 84% 35%;
    --chart-3: 263 70% 50%;
    --chart-4: 38 92% 45%;
    --chart-5: 187 85% 38%;
    --chart-axis: 220 9% 40%;
    --chart-grid: 220 13% 92%;
    --chart-tooltip-bg: 222 47% 11%;
    --chart-tooltip-fg: 210 20% 98%;

    /* Status colors — WCAG AA on white */
    --status-success: 160 84% 30%;
    --status-warning: 38 92% 40%;
    --status-error: 0 84% 50%;
    --status-info: 217 91% 45%;

    /* ═══════════════════════════════════════════ */
    /* FRICTIONLESS DESIGN TOKENS (Light mode)    */
    /* ═══════════════════════════════════════════ */

    --fi-score-excellent: #16A34A;
    --fi-score-impressive: #16A34A;
    --fi-score-good: #EAB308;
    --fi-score-moderate: #EAB308;
    --fi-score-need-improvement: #DC2626;

    --fi-score-excellent-bg: #F0FDF4;
    --fi-score-good-bg: #FEFCE8;
    --fi-score-moderate-bg: #FEFCE8;
    --fi-score-need-improvement-bg: #FEF2F2;

    --fi-bg-primary: #F8FAFC;
    --fi-bg-secondary: #F1F5F9;
    --fi-bg-tertiary: #E2E8F0;
    --fi-bg-card: #FFFFFF;
    --fi-bg-card-hover: #F8FAFC;
    --fi-bg-overlay: rgba(0, 0, 0, 0.5);

    --fi-border: #E2E8F0;
    --fi-border-strong: #CBD5E1;
    --fi-border-focus: #10B981;

    --fi-text-primary: #0F172A;
    --fi-text-secondary: #475569;
    --fi-text-tertiary: #64748B;
    --fi-text-muted: #94A3B8;
    --fi-text-inverse: #FFFFFF;
    --fi-text-link: #10B981;

    --fi-shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
    --fi-shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.06), 0 1px 2px rgba(0, 0, 0, 0.04);
    --fi-shadow: 0 2px 8px rgba(0, 0, 0, 0.08), 0 1px 2px rgba(0, 0, 0, 0.04);
    --fi-shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
    --fi-shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.1);
    --fi-shadow-xl: 0 16px 48px rgba(0, 0, 0, 0.12);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    @apply bg-background text-foreground font-body antialiased;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
  }

  code, pre, .font-mono {
    font-family: var(--font-mono);
  }
}

@layer components {
  .glass {
    @apply backdrop-blur-xl border;
  }
  :root:not(.light) .glass {
    @apply bg-white/5 border-white/10;
  }
  .light .glass {
    @apply bg-black/5 border-black/10;
  }

  .glass-card {
    @apply backdrop-blur-xl rounded-xl;
    background-color: hsl(var(--bg-surface));
    border: 1px solid hsl(var(--border-default));
  }
  :root:not(.light) .glass-card {
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2), inset 0 0 0 1px rgba(255, 255, 255, 0.03);
  }
  .light .glass-card {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(0, 0, 0, 0.04);
  }

  .gradient-text {
    @apply bg-clip-text text-transparent bg-neon-gradient;
  }

  .glow-border {
    @apply border border-electric-blue/20 shadow-glow;
  }

  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .touch-target {
    min-width: 44px;
    min-height: 44px;
  }
}

/* Custom scrollbar for desktop */
@media (hover: hover) {
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }
  ::-webkit-scrollbar-track {
    background: transparent;
  }
  :root:not(.light) ::-webkit-scrollbar-thumb {
    background: hsl(220 13% 26%);
    border-radius: 3px;
  }
  :root:not(.light) ::-webkit-scrollbar-thumb:hover {
    background: hsl(220 13% 36%);
  }
  .light ::-webkit-scrollbar-thumb {
    background: hsl(220 13% 85%);
    border-radius: 3px;
  }
  .light ::-webkit-scrollbar-thumb:hover {
    background: hsl(220 13% 75%);
  }
}

/* Mobile viewport height fix */
@supports (height: 100dvh) {
  .h-screen-safe {
    height: 100dvh;
  }
}
@supports not (height: 100dvh) {
  .h-screen-safe {
    height: 100vh;
  }
}

/* Animated gradient background */
.animated-gradient {
  background-size: 300% 300%;
  animation: gradient-shift 8s ease infinite;
}

/* Dashboard hero gradient */
.dashboard-hero-gradient {
  background:
    radial-gradient(ellipse 80% 60% at 20% 40%, hsl(217 91% 60% / 0.08) 0%, transparent 70%),
    radial-gradient(ellipse 60% 50% at 80% 30%, hsl(263 70% 58% / 0.06) 0%, transparent 70%),
    hsl(var(--bg-surface));
}
.light .dashboard-hero-gradient {
  background:
    radial-gradient(ellipse 80% 60% at 20% 40%, hsl(217 91% 50% / 0.06) 0%, transparent 70%),
    radial-gradient(ellipse 60% 50% at 80% 30%, hsl(263 70% 50% / 0.04) 0%, transparent 70%),
    hsl(var(--bg-surface));
}

/* AI insight card glow */
.ai-insight-glow {
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.2),
    0 0 20px hsl(263 70% 58% / 0.08),
    0 0 40px hsl(217 91% 60% / 0.05),
    inset 0 0 0 1px rgba(255, 255, 255, 0.03);
}
.light .ai-insight-glow {
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.08),
    0 0 20px hsl(263 70% 50% / 0.06),
    0 0 40px hsl(217 91% 50% / 0.03),
    0 0 0 1px rgba(0, 0, 0, 0.04);
}

/* Skeleton shimmer */
.skeleton-shimmer {
  position: relative;
  overflow: hidden;
}
.skeleton-shimmer::after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  transform: translateX(-100%);
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.04),
    transparent
  );
  animation: shimmer 2s infinite;
}
.light .skeleton-shimmer::after {
  background: linear-gradient(
    90deg,
    transparent,
    rgba(0, 0, 0, 0.04),
    transparent
  );
}

/* Readiness rubric card evidence styling */
.readiness-rubric-card {
  transition: box-shadow 0.2s ease, border-color 0.2s ease;
}
.readiness-rubric-card:hover {
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
}
.light .readiness-rubric-card:hover {
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
}

/* Readiness score gauge glow */
.score-gauge-glow {
  filter: drop-shadow(0 0 8px var(--score-color, rgba(59, 130, 246, 0.3)));
}

/* Readiness category panel - equal height layout */
.readiness-category-panel {
  display: flex;
  flex-direction: column;
}

/* Recharts tooltip override for glass effect */
.recharts-tooltip-wrapper {
  z-index: 100 !important;
}

/* Ask Frictionless side panel */
.ask-panel-shadow {
  box-shadow: -8px 0 32px rgba(0, 0, 0, 0.15);
}
.light .ask-panel-shadow {
  box-shadow: -4px 0 24px rgba(0, 0, 0, 0.08);
}

/* ═══════════════════════════════════════════ */
/* FRICTIONLESS UTILITY CLASSES                */
/* ═══════════════════════════════════════════ */

/* Cards */
.fi-card {
  background: var(--fi-bg-card);
  border: 1px solid var(--fi-border);
  border-radius: var(--fi-radius-lg);
  padding: var(--fi-space-6);
  box-shadow: var(--fi-shadow-sm);
  transition: box-shadow var(--fi-transition), transform var(--fi-transition);
}
.fi-card:hover {
  box-shadow: var(--fi-shadow);
}
.fi-card-interactive:hover {
  box-shadow: var(--fi-shadow-md);
  transform: translateY(-1px);
}

/* Score display */
.fi-score-display {
  font-size: var(--fi-text-score);
  font-weight: 700;
  line-height: 1;
  letter-spacing: -0.02em;
}

/* Buttons */
.fi-btn {
  display: inline-flex;
  align-items: center;
  gap: var(--fi-space-2);
  padding: var(--fi-space-2) var(--fi-space-4);
  border-radius: var(--fi-radius);
  font-size: var(--fi-text-sm);
  font-weight: 500;
  cursor: pointer;
  transition: all var(--fi-transition);
  border: none;
}
.fi-btn-primary {
  background: var(--fi-primary);
  color: white;
}
.fi-btn-primary:hover {
  background: var(--fi-primary-hover);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.25);
}
.fi-btn-primary:active {
  transform: translateY(0);
  box-shadow: none;
}
.fi-btn-outline {
  background: transparent;
  border: 1px solid var(--fi-border);
  color: var(--fi-text-primary);
}
.fi-btn-outline:hover {
  border-color: var(--fi-primary);
  color: var(--fi-primary);
  transform: translateY(-1px);
}
.fi-btn-outline:active {
  transform: translateY(0);
}
.fi-btn-ghost {
  background: transparent;
  color: var(--fi-text-secondary);
}
.fi-btn-ghost:hover {
  background: var(--fi-bg-tertiary);
  color: var(--fi-text-primary);
  transform: translateY(-1px);
}
.fi-btn-ghost:active {
  transform: translateY(0);
}

/* Badges */
.fi-badge {
  display: inline-flex;
  align-items: center;
  padding: 2px 10px;
  border-radius: var(--fi-radius-full);
  font-size: var(--fi-text-xs);
  font-weight: 600;
  letter-spacing: 0.01em;
  transition: transform var(--fi-transition-fast);
}
.fi-badge:hover {
  transform: scale(1.05);
}
.fi-badge-green {
  background: var(--fi-score-excellent-bg);
  color: var(--fi-score-excellent);
}
.fi-badge-yellow {
  background: var(--fi-score-good-bg);
  color: var(--fi-score-good);
}
.fi-badge-red {
  background: var(--fi-score-need-improvement-bg);
  color: var(--fi-score-need-improvement);
}

/* Skeleton animation */
@keyframes fi-shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
.fi-skeleton {
  background: linear-gradient(90deg,
    var(--fi-bg-tertiary) 25%,
    var(--fi-bg-secondary) 50%,
    var(--fi-bg-tertiary) 75%
  );
  background-size: 200% 100%;
  animation: fi-shimmer 1.5s ease-in-out infinite;
  border-radius: var(--fi-radius);
}

/* Section headers */
.fi-section-title {
  font-size: var(--fi-text-xl);
  font-weight: 700;
  color: var(--fi-text-primary);
  margin-bottom: var(--fi-space-4);
}
.fi-section-subtitle {
  font-size: var(--fi-text-sm);
  color: var(--fi-text-tertiary);
  margin-bottom: var(--fi-space-6);
}

/* Page title */
.fi-page-title {
  font-size: var(--fi-text-3xl);
  font-weight: 700;
  color: var(--fi-text-primary);
  letter-spacing: -0.02em;
}

/* ═══════════════════════════════════════════ */
/* PHASE 9: ANIMATIONS & VISUAL POLISH        */
/* ═══════════════════════════════════════════ */

/* Card entrance animation */
@keyframes fi-card-enter {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fi-fade-in-up {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fi-scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Staggered card entrance — apply fi-card-animate to container children */
.fi-card-animate {
  animation: fi-card-enter 0.4s cubic-bezier(0, 0, 0.58, 1) both;
}
.fi-card-animate:nth-child(1) { animation-delay: 0ms; }
.fi-card-animate:nth-child(2) { animation-delay: 60ms; }
.fi-card-animate:nth-child(3) { animation-delay: 120ms; }
.fi-card-animate:nth-child(4) { animation-delay: 180ms; }
.fi-card-animate:nth-child(5) { animation-delay: 240ms; }
.fi-card-animate:nth-child(6) { animation-delay: 300ms; }

/* Interactive card hover enhancement */
.fi-card-interactive {
  cursor: pointer;
}
.fi-card-interactive:hover {
  box-shadow: var(--fi-shadow-md);
  transform: translateY(-2px);
}
.fi-card-interactive:active {
  transform: translateY(0);
  box-shadow: var(--fi-shadow-sm);
}

/* Card top accent border utility */
.fi-card-accent {
  position: relative;
  overflow: hidden;
}
.fi-card-accent::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--fi-primary), var(--fi-score-good));
  border-radius: var(--fi-radius-lg) var(--fi-radius-lg) 0 0;
}

/* Score gauge glow */
.fi-gauge-glow {
  filter: drop-shadow(0 0 6px var(--fi-gauge-color, rgba(16, 185, 129, 0.3)));
}

/* Dark mode glow effects */
:root:not(.light) .fi-glow-primary {
  box-shadow:
    var(--fi-shadow-sm),
    0 0 20px rgba(16, 185, 129, 0.08),
    0 0 40px rgba(16, 185, 129, 0.04);
}
:root:not(.light) .fi-glow-accent {
  box-shadow:
    var(--fi-shadow-sm),
    0 0 20px rgba(99, 102, 241, 0.08),
    0 0 40px rgba(99, 102, 241, 0.04);
}

/* Gradient mesh background */
.fi-gradient-mesh {
  position: relative;
}
.fi-gradient-mesh::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}
:root:not(.light) .fi-gradient-mesh::before {
  background:
    radial-gradient(ellipse 80% 50% at 20% 40%, rgba(16, 185, 129, 0.04) 0%, transparent 70%),
    radial-gradient(ellipse 60% 40% at 80% 30%, rgba(99, 102, 241, 0.03) 0%, transparent 70%);
}
.light .fi-gradient-mesh::before {
  background:
    radial-gradient(ellipse 80% 50% at 20% 40%, rgba(16, 185, 129, 0.03) 0%, transparent 70%),
    radial-gradient(ellipse 60% 40% at 80% 30%, rgba(99, 102, 241, 0.02) 0%, transparent 70%);
}

/* Score count-up number animation */
@keyframes fi-number-fade-in {
  from {
    opacity: 0;
    transform: translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
.fi-number-animate {
  animation: fi-number-fade-in 0.3s ease-out both;
}

/* Checkbox check animation */
@keyframes fi-check-draw {
  from {
    stroke-dashoffset: 24;
  }
  to {
    stroke-dashoffset: 0;
  }
}
.fi-check-animate {
  stroke-dasharray: 24;
  animation: fi-check-draw 0.3s ease-out forwards;
}

/* ═══════════════════════════════════════════ */
/* PHASE 10: PREMIUM DESIGN ENHANCEMENTS      */
/* ═══════════════════════════════════════════ */

/* ── 3D Perspective Container ── */
.fi-perspective { perspective: 1200px; }

/* ── 3D Card Tilt on Hover ── */
.fi-card-3d {
  transform-style: preserve-3d;
  transition: transform 0.5s cubic-bezier(0.03, 0.98, 0.52, 0.99),
              box-shadow 0.5s ease;
  will-change: transform;
}
.fi-card-3d:hover {
  transform: rotateX(1.5deg) rotateY(-1.5deg) translateY(-6px) scale(1.005);
}
:root:not(.light) .fi-card-3d:hover {
  box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5), 0 0 40px rgba(16,185,129,0.05);
}
.light .fi-card-3d:hover {
  box-shadow: 0 25px 50px -12px rgba(0,0,0,0.12), 0 0 30px rgba(16,185,129,0.04);
}

/* ── Shine Sweep Effect ── */
.fi-card-shine { position: relative; overflow: hidden; }
.fi-card-shine::after {
  content: '';
  position: absolute;
  top: -50%; left: -50%;
  width: 200%; height: 200%;
  background: linear-gradient(105deg,
    transparent 40%,
    rgba(255,255,255,0.03) 45%,
    rgba(255,255,255,0.07) 50%,
    rgba(255,255,255,0.03) 55%,
    transparent 60%
  );
  transform: translateX(-100%);
  transition: transform 0.7s cubic-bezier(0.23,1,0.32,1);
  pointer-events: none;
  z-index: 2;
}
.fi-card-shine:hover::after { transform: translateX(100%); }
.light .fi-card-shine::after {
  background: linear-gradient(105deg,
    transparent 40%, rgba(255,255,255,0.35) 45%,
    rgba(255,255,255,0.7) 50%, rgba(255,255,255,0.35) 55%,
    transparent 60%
  );
}

/* ── Inner Card Glass Depth ── */
:root:not(.light) .fi-card-depth {
  box-shadow: var(--fi-shadow-sm), inset 0 1px 0 rgba(255,255,255,0.05), inset 0 0 0 1px rgba(255,255,255,0.03);
  border-color: rgba(255,255,255,0.06);
}
.light .fi-card-depth {
  box-shadow: var(--fi-shadow-sm), inset 0 1px 0 rgba(255,255,255,0.8), inset 0 0 0 1px rgba(255,255,255,0.4);
}
:root:not(.light) .fi-card-depth:hover {
  box-shadow: var(--fi-shadow-lg), inset 0 1px 0 rgba(255,255,255,0.07), inset 0 0 0 1px rgba(255,255,255,0.05);
}
.light .fi-card-depth:hover {
  box-shadow: var(--fi-shadow-lg), inset 0 2px 0 rgba(255,255,255,1), inset 0 0 0 1px rgba(255,255,255,0.6);
}

/* ── Animated Gradient Top Accent Bar ── */
@keyframes fi-accent-flow {
  0% { background-position: 0% 50%; }
  100% { background-position: 200% 50%; }
}
.fi-card-accent-flow { position: relative; overflow: hidden; }
.fi-card-accent-flow::before {
  content: '';
  position: absolute; top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg,
    var(--fi-primary), hsl(217 91% 60%), hsl(263 70% 58%), var(--fi-primary)
  );
  background-size: 200% 100%;
  animation: fi-accent-flow 4s linear infinite;
  border-radius: var(--fi-radius-lg) var(--fi-radius-lg) 0 0;
}

/* ── Score Gauge Breathing Glow ── */
@keyframes fi-gauge-breathe {
  0%, 100% { opacity: 0.35; transform: scale(0.92); }
  50% { opacity: 0.65; transform: scale(1.08); }
}
.fi-gauge-ring-glow {
  position: absolute;
  border-radius: 50%;
  z-index: 0;
  animation: fi-gauge-breathe 3s ease-in-out infinite;
  pointer-events: none;
}
:root:not(.light) .fi-gauge-ring-glow {
  background: radial-gradient(circle, var(--fi-glow-color, rgba(16,185,129,0.12)) 0%, transparent 70%);
}
.light .fi-gauge-ring-glow {
  background: radial-gradient(circle, var(--fi-glow-color, rgba(16,185,129,0.06)) 0%, transparent 70%);
}

/* ── Animated Gradient Welcome Text ── */
@keyframes fi-text-shimmer {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}
.fi-text-shimmer {
  background: linear-gradient(110deg,
    var(--fi-text-primary) 30%, var(--fi-primary) 48%,
    hsl(217 91% 70%) 52%, var(--fi-text-primary) 70%
  );
  background-size: 250% 100%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  animation: fi-text-shimmer 5s ease-in-out infinite;
}

/* ── Floating Background Orbs ── */
@keyframes fi-orb-drift-1 {
  0%, 100% { transform: translate(0,0) scale(1); opacity: 0.5; }
  25% { transform: translate(40px,-50px) scale(1.1); opacity: 0.7; }
  50% { transform: translate(-30px,-80px) scale(0.9); opacity: 0.4; }
  75% { transform: translate(50px,-30px) scale(1.05); opacity: 0.6; }
}
@keyframes fi-orb-drift-2 {
  0%, 100% { transform: translate(0,0) scale(1); opacity: 0.4; }
  33% { transform: translate(-50px,40px) scale(1.15); opacity: 0.6; }
  66% { transform: translate(40px,-40px) scale(0.9); opacity: 0.3; }
}
@keyframes fi-orb-drift-3 {
  0%, 100% { transform: translate(0,0) scale(1); opacity: 0.3; }
  50% { transform: translate(30px,50px) scale(1.2); opacity: 0.5; }
}
.fi-orb {
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
  z-index: 0;
}
:root:not(.light) .fi-orb { filter: blur(80px); }
.light .fi-orb { filter: blur(100px); }

/* ── Investor Row Glow Hover ── */
.fi-row-glow { transition: background 0.25s ease, box-shadow 0.25s ease; }
:root:not(.light) .fi-row-glow:hover {
  background: linear-gradient(90deg, transparent, rgba(16,185,129,0.04), transparent) !important;
  box-shadow: inset 0 0 0 1px rgba(16,185,129,0.06);
}
.light .fi-row-glow:hover {
  background: linear-gradient(90deg, transparent, rgba(16,185,129,0.06), transparent) !important;
}

/* ── Task Item Hover Slide ── */
.fi-task-slide {
  transition: all 0.3s cubic-bezier(0.34,1.56,0.64,1);
  border-radius: var(--fi-radius);
}
.fi-task-slide:hover {
  background: var(--fi-bg-card-hover);
  transform: translateX(6px);
  border-color: rgba(16,185,129,0.15);
}

/* ── Sparkle Pulse ── */
@keyframes fi-sparkle-pulse {
  0%, 100% { opacity: 1; transform: scale(1) rotate(0deg); }
  50% { opacity: 0.5; transform: scale(0.85) rotate(180deg); }
}
.fi-sparkle { animation: fi-sparkle-pulse 2s ease-in-out infinite; display: inline-flex; }

/* ── Score Bar Animated Fill ── */
@keyframes fi-bar-fill { from { width: 0; } }
.fi-bar-animated {
  animation: fi-bar-fill 1.2s cubic-bezier(0.33,1,0.68,1) both;
  animation-delay: 0.4s;
}

/* ── Logo Ring Glow ── */
@keyframes fi-logo-ring {
  0%, 100% { box-shadow: 0 0 0 0 rgba(16,185,129,0.25); }
  50% { box-shadow: 0 0 0 5px rgba(16,185,129,0.08); }
}
.fi-logo-glow {
  animation: fi-logo-ring 3s ease-in-out infinite;
  border: 2px solid rgba(16,185,129,0.2);
}

/* ── Noise Texture Overlay (subtle film grain) ── */
.fi-noise-overlay::before {
  content: '';
  position: fixed; inset: 0;
  pointer-events: none;
  z-index: 9999;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  mix-blend-mode: overlay;
}
:root:not(.light) .fi-noise-overlay::before { opacity: 0.018; }
.light .fi-noise-overlay::before { opacity: 0.025; }

/* ── Funding Ring Glow ── */
@keyframes fi-ring-glow-pulse {
  0%, 100% { filter: drop-shadow(0 0 4px rgba(16,185,129,0.2)); }
  50% { filter: drop-shadow(0 0 14px rgba(16,185,129,0.4)); }
}
.fi-funding-ring-glow { animation: fi-ring-glow-pulse 3s ease-in-out infinite; }

/* ── Button Shine Effect ── */
.fi-btn-shine { position: relative; overflow: hidden; }
.fi-btn-shine::before {
  content: '';
  position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
  transition: left 0.5s ease;
}
.fi-btn-shine:hover::before { left: 100%; }

/* ── Stat Number Pop ── */
@keyframes fi-stat-pop {
  0% { opacity: 0; transform: scale(0.5); }
  60% { transform: scale(1.08); }
  100% { opacity: 1; transform: scale(1); }
}
.fi-stat-pop { animation: fi-stat-pop 0.6s cubic-bezier(0.34,1.56,0.64,1) both; }

/* ── Gentle Float ── */
@keyframes fi-float-gentle {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}
.fi-float { animation: fi-float-gentle 5s ease-in-out infinite; }

/* ═══════════════════════════════════════════ */
/* ACCESSIBILITY: Reduced Motion              */
/* ═══════════════════════════════════════════ */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  .fi-card-animate,
  .fi-sparkle,
  .fi-float,
  .fi-gauge-ring-glow,
  .fi-funding-ring-glow {
    animation: none;
    opacity: 1;
    transform: none;
  }
  .fi-gauge-glow,
  .fi-card-depth {
    filter: none;
  }
  .fi-text-shimmer {
    -webkit-text-fill-color: var(--fi-text-primary);
    animation: none;
  }
  .fi-card-shine::after,
  .fi-card-accent-flow::before,
  .fi-noise-overlay::before {
    display: none;
  }
}

/* ═══════════════════════════════════════════ */
/* STORYTELLING DASHBOARD ADDITIONS            */
/* ═══════════════════════════════════════════ */

/* Pulse ring around hero gauge */
@keyframes fi-pulse-ring-anim {
  0%, 100% { box-shadow: 0 0 0 0 var(--fi-pulse-color, rgba(16, 185, 129, 0.2)); }
  50% { box-shadow: 0 0 0 8px var(--fi-pulse-color, rgba(16, 185, 129, 0)); }
}
.fi-pulse-ring {
  border: 2px solid transparent;
  border-radius: 9999px;
  animation: fi-pulse-ring-anim 3s ease-in-out infinite;
}

/* Hero gradient background (score-aware via inline style) */
.fi-hero-gradient {
  position: relative;
}

/* Narrative text reveal fade */
.fi-narrative-fade {
  opacity: 1;
}

/* Cursor blink for typewriter */
@keyframes fi-cursor-blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

/* Timeline connection dots */
.fi-timeline-dot {
  width: 8px;
  height: 8px;
  border-radius: 9999px;
  background: var(--fi-primary);
  box-shadow: 0 0 0 3px var(--fi-bg-card);
}

/* Investor card glow on hover */
.fi-investor-card:hover {
  box-shadow: var(--fi-shadow-md), 0 0 20px rgba(16, 185, 129, 0.06);
}
.light .fi-investor-card:hover {
  box-shadow: var(--fi-shadow-md), 0 0 20px rgba(16, 185, 129, 0.04);
}

/* ═══════════════════════════════════════════ */
/* MISSION CONTROL — ADVANCED DASHBOARD       */
/* ═══════════════════════════════════════════ */

/* ── Dot-Grid Background ── */
.fi-mc-bg {
  position: relative;
}
.fi-mc-bg::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background-image: radial-gradient(circle, var(--fi-border) 1px, transparent 1px);
  background-size: 24px 24px;
}
:root:not(.light) .fi-mc-bg::before { opacity: 0.3; }
.light .fi-mc-bg::before { opacity: 0.25; }

/* ── 12-Column Bento Grid ── */
.fi-mc-grid {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  gap: 8px;
  width: 100%;
}
@media (max-width: 1199px) {
  .fi-mc-grid {
    grid-template-columns: repeat(6, 1fr);
  }
}
@media (max-width: 767px) {
  .fi-mc-grid {
    grid-template-columns: 1fr;
  }
}

/* ── Flat Cell ── */
.fi-mc-cell {
  background: var(--fi-bg-card);
  border: 1px solid var(--fi-border);
  border-radius: 8px;
  padding: 12px;
  transition: border-color var(--fi-transition-fast);
  position: relative;
  overflow: hidden;
}
.fi-mc-cell:hover {
  border-color: var(--fi-border-strong);
}

/* ── Uppercase Tiny Headers ── */
.fi-mc-label {
  font-family: var(--fi-font-mono);
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--fi-text-muted);
  line-height: 1;
}

/* ── Mono Numbers ── */
.fi-mc-value {
  font-family: var(--fi-font-mono);
  font-weight: 700;
  color: var(--fi-text-primary);
  line-height: 1.1;
}

/* ── Status Bar (top & bottom) ── */
.fi-mc-status-bar {
  display: flex;
  align-items: center;
  gap: 16px;
  background: var(--fi-bg-secondary);
  border: 1px solid var(--fi-border);
  border-radius: 8px;
  padding: 0 16px;
  font-family: var(--fi-font-mono);
  font-size: 12px;
  color: var(--fi-text-secondary);
  overflow-x: auto;
  white-space: nowrap;
}

/* ── Live Pulse Dot ── */
@keyframes fi-mc-pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.4; transform: scale(0.7); }
}
.fi-mc-live-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--fi-score-excellent);
  animation: fi-mc-pulse 2s ease-in-out infinite;
  display: inline-block;
}

/* ── Dense Table ── */
.fi-mc-table {
  width: 100%;
  border-collapse: collapse;
  font-family: var(--fi-font-mono);
  font-size: 12px;
}
.fi-mc-table th {
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: var(--fi-text-muted);
  text-align: left;
  padding: 6px 8px;
  border-bottom: 1px solid var(--fi-border);
}
.fi-mc-table td {
  padding: 6px 8px;
  color: var(--fi-text-secondary);
  border-bottom: 1px solid var(--fi-border);
}
.fi-mc-table tr:last-child td {
  border-bottom: none;
}
.fi-mc-table tr:hover td {
  background: var(--fi-bg-secondary);
}

/* ── Command Bar Buttons ── */
.fi-mc-cmd-btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 14px;
  border-radius: 6px;
  border: 1px solid var(--fi-border);
  background: transparent;
  font-family: var(--fi-font-mono);
  font-size: 11px;
  font-weight: 500;
  letter-spacing: 0.02em;
  color: var(--fi-text-secondary);
  cursor: pointer;
  transition: all var(--fi-transition-fast);
}
.fi-mc-cmd-btn:hover {
  border-color: var(--fi-primary);
  color: var(--fi-primary);
  background: rgba(16, 185, 129, 0.05);
}

/* ── Score Ring (compact) ── */
.fi-mc-ring {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ── Mini Severity Bars ── */
.fi-mc-severity-high { color: var(--fi-score-need-improvement); }
.fi-mc-severity-medium { color: var(--fi-score-good); }
.fi-mc-severity-low { color: var(--fi-score-excellent); }

/* ── Activity Feed ── */
.fi-mc-feed-item {
  position: relative;
  padding-left: 16px;
  padding-bottom: 10px;
  font-size: 12px;
  color: var(--fi-text-secondary);
}
.fi-mc-feed-item::before {
  content: '';
  position: absolute;
  left: 0;
  top: 6px;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--fi-primary);
}
.fi-mc-feed-item::after {
  content: '';
  position: absolute;
  left: 2.5px;
  top: 14px;
  bottom: 0;
  width: 1px;
  background: var(--fi-border);
}
.fi-mc-feed-item:last-child::after { display: none; }

/* ── Reduced Motion for MC ── */
@media (prefers-reduced-motion: reduce) {
  .fi-mc-live-dot { animation: none; opacity: 1; }
}
